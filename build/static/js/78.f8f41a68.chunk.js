(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{2675:function(e,t,a){"use strict";a.r(t);var n,o=a(142),l=a(145),i=a(144),r=a(143),s=a(146),c=a(42),d=(a(100),a(89)),m=a(16),p=a(0),u=a.n(p),g=a(15),h=a(99),f=a(1032),x=a(126),b=a.n(x),E=a(1065),v=a(124),k=a.n(v),C=a(477),y=a(927),S=a(474),w=a(1139),T=a(1098),_=a(1119),j=a(925),R=a(479),A=a(1003),L=a(1002),P=a(1005),O=a(196),I=a(138),B=a(65),D=a(991),F=a(475),W=a(1004),q=a(480),N=a(112),M=a(948),U=(u.a.forwardRef(function(e,t){return u.a.createElement(h.d,Object.assign({innerRef:t},e))}),g.c.div(M.b)),H=Object(g.c)(A.a)(M.b),V=Object(g.c)(L.a)(M.b),$=(Object(g.c)(P.a)(M.b),Object(g.c)(O.a)(M.b)),G=Object(g.c)(I.a)(M.b),z=Object(g.c)(G)(n||(n=Object(m.a)(["\n  //   width: ;\n"]))),K=(Object(f.a)(function(e){var t,a,n;return{root:{flexGrow:1},paper:{height:210,maxHeight:210,minHeight:210,marginBottom:"6%",borderTopLeftRadius:5,borderTopRightRadius:5},control:{padding:e.spacing(2)},header:{background:"#DFDFDF",borderTopLeftRadius:4,borderTopRightRadius:4,color:"#000",overflow:"visible",height:"51px",paddingLeft:"8px",paddingTop:"15px"},avatar:(t={marginTop:"0px",width:"30px",height:"30px",marginLeft:"1.9px"},Object(d.a)(t,"marginTop","1.5px"),Object(d.a)(t,"marginBlockEnd","5px"),Object(d.a)(t,"background","#15244C"),t),rootCard:{overflow:"visible"},contentCard:{marginTop:"0px",marginLeft:"-10px"},avatarHalo:{marginTop:"0px",width:"40px",height:"40px",background:"#FFFFFF"},avatarVerify:{width:"15px",height:"15px",marginTop:"-15px",marginLeft:"23px",overflow:"visible"},titleName:{lineHeight:"1.00",marginTop:"1px"},ratingAdjust:{marginLeft:"-3px",verticalAlign:"bottom"},cardContent:{marginTop:"0px"},footerStyles:(a={background:"#15244C",borderBottomLeftRadius:5,borderBottomRightRadius:5,color:"#EEF4CE",paddingLeft:"8px",overflow:"visible",paddingTop:"2px",paddingBottom:"0px"},Object(d.a)(a,"paddingLeft","10px"),Object(d.a)(a,"paddingRight","8px"),a),guarantedStyle:{width:"20px",height:"20px"},footerText:{color:"#EEF4CE"},footerAdjustCenter:{alignItems:"end",alignContent:"end",width:"100%"},footerAdjustRight:{textAlign:"end",alignItems:"end",alignContent:"end",width:"50%",verticalAlign:"bottom"},paperDialog:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},avatarHaloDialog:{marginTop:"0px",width:"55px",height:"55px",background:"#FFFFFF",display:"block",marginLeft:"auto",marginRight:"auto",textAlign:"center"},avatarVerifyDialog:{width:"15px",height:"15px",marginTop:"-15px",marginLeft:"37px",overflow:"visible"},avatarDialog:(n={marginTop:"0px",width:"45px",height:"45px",marginLeft:"2px",marginBlockEnd:"5px",background:"#15244C"},Object(d.a)(n,e.breakpoints.down("xs"),{marginTop:"2.5px"}),Object(d.a)(n,e.breakpoints.down("sm"),{marginTop:"1.5px"}),Object(d.a)(n,e.breakpoints.down("md"),{marginTop:"1.5px"}),Object(d.a)(n,e.breakpoints.down("lg"),{marginTop:"1.5px"}),Object(d.a)(n,e.breakpoints.down("xl"),{marginTop:"1.5px"}),n),droot:{flexGrow:1,overflow:"hidden",padding:e.spacing(0,3)},dpaper:{maxWidth:400,margin:"".concat(e.spacing(1),"px auto"),padding:e.spacing(2)},ckroot:{},ckpaper:{},titleUser:{textAlign:"center"},centeredDiv:{display:"block",marginLeft:"auto",marginRight:"auto",textAlign:"center"}}}),function(e){e.setState({showEmailAndPassword:!0}),e.setState({showLink:!1}),e.setState({credtype:1})}),J=function(e){e.setState({showEmailAndPassword:!1}),e.setState({showLink:!0}),e.setState({credtype:2})},X=function(e,t,a,n){n.setState({backdrop:!1},function(){console.log("---\x3e"+n.state.backdrop)});var o=a.credtype,l=a.clusterXID,i=localStorage.getItem("token_sec"),r=e,s=t;b.a.post("http://localhost:5000/addDetails",{cid:l,l:r,a:s,b:r,da:s,db:"",t:o},{headers:{Authorization:"Bearer "+i,Accept:"application/json","Content-Type":"application/json"}}).then(function(e){console.log(e.data.code),"200"==e.data.code&&(n.setState({backdrop:!0},function(){console.log("---\x3e"+n.state.backdrop)}),n.setState({step1:!0},function(){console.log("---\x3e"+n.state.step1)}),n.setState({step2:!0},function(){console.log("---\x3e"+n.state.step2)}),n.setState({step3:!1},function(){console.log("---\x3e"+n.state.step3)}))}).catch(function(e){console.log(e)})},Y=function(e,t){var a=e.credtype;if(0==a&&alert("Por favor, seleccione el tipo de credenciales para agregar al grupo"),1==a){var n=e.credential_email,o=e.pass;n.length>0?o.length>0?X(n,o,e,t):alert("Por favor ingrese la clave a compartir"):alert("Por favor ingrese un correo electr\xf3nico")}if(2==a){var l=e.link,i=e.address;l.length>0?i.length>0?X(l,i,e,t):alert("Por favor ingrese el link a compartir"):alert("Por favor ingrese la direcci\xf3n exacta")}};var Z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).state={name:"",age:"",multiline:"Controlled",currency:"EUR",open:!1,backdrop:!0,personas:[],selectedMaxSlots:"0",officialPrice:"$ 0.00",legalEntity:"",serviceName:"",spots:[],groupname:"",groupnamehelper:"",svcname:"Netflix",selectedVis:!1,selectedVisibility:"",isTrue:!1,step1:!1,step2:!0,step3:!0,dt1:!0,dt2:!1,willreceive:"$ 0.00",opxreal:0,credential_email:"",pass:"",link:"",address:"",showEmailAndPassword:!1,showLink:!1,can_be_public:!0,credtype:0,clusterID:"",clusterXID:0,lts:"",ltsfb:"",toaster:!1,toasterMessage:""},a.handleChangeRadio=function(e){console.log(e),console.log(a.state.selectedCat),a.setState({selectedVis:!1}),a.setState({selectedVisibility:parseInt(e.target.value)})},a.getRelTypes=function(e,t){var a=localStorage.getItem("token_sec");b.a.post("http://localhost:5000/getConfs",{id:e},{headers:{Authorization:"Bearer "+a,Accept:"application/json","Content-Type":"application/json"}}).then(function(e){var a=[],n=[];e.data.data.forEach(function(e){var o={id:e.id,max_slots:e.max_slots,official_price:e.official_price,legal_entity:e.legal_entity};if(t.setState({selectedMaxSlots:e.max_slots}),t.setState({legalEntity:e.legal_entity}),t.setState({serviceName:e.service_name}),t.setState({dt1:e.invitation_link}),t.setState({dt2:e.managed_credentials}),t.setState({can_be_public:!e.p}),e.invitation_link&&!e.managed_credentials&&(t.setState({showEmailAndPassword:!1}),t.setState({showLink:!0})),!e.invitation_link&&e.managed_credentials&&(t.setState({showEmailAndPassword:!0}),t.setState({showLink:!1})),t.setState({opxreal:e.official_price}),e.official_price>0){var l=e.official_price/100,i="$ "+(l=l.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"));t.setState({officialPrice:i})}else t.setState({officialPrice:"$ 0.00"});for(var r=1;r<=e.max_slots;r++){var s={id:r,value:r};n.push(s)}t.setState({spots:n}),t.setState({spotsToShare:n[0]}),a.push(o)}),t.setState({dataRelations:a})}).catch(function(e){console.log(e)});a=localStorage.getItem("token_sec");b.a.post("http://localhost:5000/getRelTypes_a",{id:e},{headers:{Authorization:"Bearer "+a,Accept:"application/json","Content-Type":"application/json"}}).then(function(e){var a=[];e.data.data.forEach(function(e){var t={id:e.id,rel_name:e.rel_name};console.log(t),a.push(t)}),t.setState({dataRelationsCustom:a})}).catch(function(e){console.log(e)})},a.handleChange=function(e){return function(t){if(a.setState(Object(d.a)({},e,t.target.value)),"selectedCat"==[e]&&a.getRelTypes(t.target.value,Object(c.a)(Object(c.a)(a))),"spotsToShare"==[e]){var n=t.target.value,o=a.state.selectedMaxSlots+1,l=a.state.opxreal/o/100*n;l="$ "+l.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),a.setState({willreceive:l})}}},a.currencies=[{value:"USD",label:"$"},{value:"EUR",label:"\u20ac"},{value:"BTC",label:"\u0e3f"},{value:"JPY",label:"\xa5"}],a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=localStorage.getItem("token_sec");b.a.get("http://localhost:5000/servicetypes",{headers:{Authorization:"Bearer "+t}}).then(function(t){if(e._isMounted){var a=t.data.data;e.setState({personas:a})}});var a=""+localStorage.getItem("unx");this.setState({groupnamehelper:a})}}]),Object(r.a)(t,[{key:"render",value:function(){var e=this;return u.a.createElement(H,{style:{border:"1px solid #001E3C",boxShadow:"2px 2px #001E3C"},mb:6},u.a.createElement(W.a,null,u.a.createElement(T.a,{open:this.state.toaster,autoHideDuration:100,message:this.state.toasterMessage}),u.a.createElement(q.a,{hidden:this.state.backdrop,sx:{display:"flex"}},u.a.createElement(S.a,null)),u.a.createElement($,{hidden:this.state.step1,mt:3},u.a.createElement("form",null,u.a.createElement(N.a,{mb:10,variant:"h6",gutterBottom:!0},"1/3 - Datos del servicio"),u.a.createElement(B.a,{container:!0,spacing:2,mt:10},u.a.createElement(B.a,{item:!0,xs:12,md:12,lg:12,xl:12},u.a.createElement(z,{id:"outlined-select-currency0",select:!0,label:"Servicio que compartir\xe1s",fullWidth:!0,value:this.state.selectedCat,onChange:this.handleChange("selectedCat"),variant:"outlined"},this.state.personas.map(function(e){return u.a.createElement(D.a,{key:e.id,value:e.id},e.service_name)})))),u.a.createElement(U,{m:2}),u.a.createElement(B.a,{container:!0,spacing:2},u.a.createElement(B.a,{item:!0,xs:12,md:12,lg:12,xl:12},u.a.createElement(z,{fullWidth:!0,id:"outlined-name",label:"Nombre del grupo",inputProps:{maxLength:35},required:!0,value:this.state.groupname,onChange:this.handleChange("groupname"),helperText:"Ej. "+this.state.svcname+" de "+this.state.groupnamehelper,variant:"outlined"}))),u.a.createElement(U,{m:2}),u.a.createElement(B.a,{container:!0,spacing:2},u.a.createElement(B.a,{item:!0,xs:12,md:6,lg:6,xl:6},u.a.createElement(z,{fullWidth:!0,id:"outlined-disabled",label:"Precio oficial",defaultValue:"$ 0.00",value:this.state.officialPrice,helperText:"(Lo que t\xfa pagas por mes)",variant:"outlined",color:"success"})),""==this.state.legalEntity?"":u.a.createElement(B.a,{item:!0,xs:12,md:6,lg:6,xl:6},u.a.createElement(z,{id:"outlined-select-currency0",select:!0,required:!0,label:"Espacios disponibles",fullWidth:!0,helperText:"M\xe1ximo a compartir: "+this.state.selectedMaxSlots+" (Excluyendo el tuyo)",value:this.state.spotsToShare,onChange:this.handleChange("spotsToShare"),variant:"outlined"},this.state.spots.map(function(e){return u.a.createElement(D.a,{key:e.id,value:e.id},e.value)}))),u.a.createElement(B.a,{item:!0,xs:12,md:12,lg:12,xl:12},u.a.createElement(U,{m:2})),""==this.state.legalEntity?"":u.a.createElement(B.a,{item:!0,xs:12,md:12,lg:12,xl:12},u.a.createElement(N.a,{variant:"h6",gutterBottom:!0},"Datos de acceso al grupo")),""==this.state.legalEntity?"":u.a.createElement(B.a,{item:!0,xs:12,md:6,lg:6,xl:6},u.a.createElement(z,{id:"outlined-select-currency0",select:!0,required:!0,label:"\xbfQui\xe9n puede unirse?",fullWidth:!0,value:this.state.selectedRelation,onChange:this.handleChange("selectedRelation"),variant:"outlined"},this.state.dataRelationsCustom.map(function(e){return u.a.createElement(D.a,{key:e.id,value:e.id},e.rel_name)}))),""==this.state.legalEntity?"":u.a.createElement(B.a,{item:!0,xs:12,md:6,lg:6,xl:6},u.a.createElement(j.a,{helperText:"asdas"},u.a.createElement(y.a,{id:"demo-row-radio-buttons-group-label"},"Tipo de grupo"),u.a.createElement(_.a,{row:!0,required:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",onChange:this.handleChangeRadio},u.a.createElement(C.a,{value:"1",disabled:this.state.can_be_public,control:u.a.createElement(w.a,null),label:"P\xfablico"}),u.a.createElement(C.a,{value:"0",control:u.a.createElement(w.a,null),label:"Privado"})))),""==this.state.legalEntity?"":u.a.createElement(B.a,{item:!0,xs:12,md:12,lg:12,xl:12},u.a.createElement(U,{m:2})),""==this.state.legalEntity?"":u.a.createElement(B.a,{item:!0,xs:10,md:11,lg:11,xl:11},u.a.createElement(N.a,{variant:"caption",gutterBottom:!0,display:"block"},"Confirmo que entiendo que KIP no est\xe1 asociado o afiliado a ",this.state.legalEntity," y que he le\xeddo, entendido y he aceptado cumplir con los t\xe9rminos y condiciones de uso para compartir ",this.state.serviceName,".")),""==this.state.legalEntity?"":u.a.createElement(B.a,{item:!0,xs:2,md:1,lg:1,xl:1},u.a.createElement(q.a,{textAlign:"right",marginRight:4},u.a.createElement(R.a,{mr:10,inputProps:{"aria-label":"primary checkbox"},onChange:function(t){console.log(t.target.checked),e.setState({isTrue:t.target.checked})}}))),""==this.state.legalEntity?"":u.a.createElement(B.a,{item:!0,xs:12,md:12,lg:12,xl:12},u.a.createElement(U,{m:2})),""==this.state.legalEntity?"":u.a.createElement(F.a,{backgroundColor:"#172449",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return function(e,t){var a=e.selectedCat,n=e.groupname,o=e.spotsToShare,l=e.selectedRelation,i=e.selectedVisibility,r=e.isTrue;if(n)if(console.log("----1"),o>0)if(console.log("-----2"),l>0)if(console.log("-------3"),1==i||0==i)if(console.log("------4"),r){console.log("------4a");var s=localStorage.getItem("token_sec");t.setState({backdrop:!1},function(){console.log("---\x3e"+t.state.backdrop)}),b.a.post("http://localhost:5000/createNewGroup",{s:a,n:n,t:o,w:l,g:i},{headers:{Authorization:"Bearer "+s,Accept:"application/json","Content-Type":"application/json"}}).then(function(e){t.setState({clusterID:e.data.code}),t.setState({clusterXID:e.data.id}),t.setState({lts:e.data.l}),t.setState({ltsfb:"https://www.facebook.com/sharer/sharer.php?u="+e.data.l}),console.log(e.data.code),t.setState({step1:!0},function(){console.log("---\x3e"+t.state.step1)}),t.setState({step2:!1},function(){console.log("---\x3e"+t.state.step2)}),t.setState({backdrop:!0},function(){console.log("---\x3e"+t.state.backdrop)})}).catch(function(e){console.log(e)})}else console.log("5");else console.log("6");else console.log("7");else console.log("8")}(e.state,e)}},"CONTINUAR")))),u.a.createElement($,{hidden:this.state.step2,mt:3},u.a.createElement("form",null,u.a.createElement(N.a,{mb:10,variant:"h6",gutterBottom:!0},"2/3 - Credenciales y acceso al grupo"),u.a.createElement(q.a,{mt:2}," "),u.a.createElement(N.a,{variant:"caption",gutterBottom:!0,display:"block"},"Selecciona el tipo de acceso que dar\xe1s a los miembros de tu grupo para acceder a tu grupo de"," ",u.a.createElement("b",null,this.state.serviceName," "),"."),u.a.createElement(q.a,{mt:2}," "),u.a.createElement(B.a,{container:!0},this.state.dt1&&this.state.dt2?u.a.createElement(B.a,{container:!0,spacing:2,mt:10},u.a.createElement(B.a,{item:!0,xs:12,md:6,lg:6,xl:6},u.a.createElement(F.a,{backgroundColor:"#172449",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){return K(e)}},"Usuario y clave")),u.a.createElement(B.a,{item:!0,xs:12,md:6,lg:6,xl:6},u.a.createElement(F.a,{backgroundColor:"#172449",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){return J(e)}},"Link de invitaci\xf3n"))):u.a.createElement(B.a,{item:!0,xs:12,md:12,lg:12,xl:12},this.state.dt1?u.a.createElement(F.a,{backgroundColor:"#172449",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){return J(e)}},"Link de invitaci\xf3n"):"",this.state.dt2?u.a.createElement(F.a,{backgroundColor:"#172449",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){return K(e)}},"Usuario y clave"):"")),u.a.createElement(U,{m:2}),this.state.showEmailAndPassword?u.a.createElement(B.a,{container:!0,spacing:2},u.a.createElement(B.a,{item:!0,xs:12,md:12,lg:12,xl:12},u.a.createElement(z,{fullWidth:!0,id:"txCorreo",label:"Correo electr\xf3nico",inputProps:{maxLength:256},required:!0,value:this.state.credential_email,onChange:this.handleChange("credential_email"),variant:"outlined"})),u.a.createElement(B.a,{item:!0,xs:12,md:12,lg:12,xl:12},u.a.createElement(z,{fullWidth:!0,id:"outlined-name",label:"Contrase\xf1a",inputProps:{maxLength:500},required:!0,value:this.state.pass,onChange:this.handleChange("pass"),variant:"outlined"})),u.a.createElement(U,{m:2}),u.a.createElement(F.a,{backgroundColor:"#172449",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return Y(e.state,e)}},"GUARDAR Y FINALIZAR"),u.a.createElement(U,{m:2}),u.a.createElement(E.a,{color:"success",fullWidth:!0,severity:"info"},"Los miembros del grupo tendr\xe1n acceso siempre y cuando env\xeden su cuota mensual de forma autom\xe1tica o manual por medio de KIP."),u.a.createElement(q.a,{mt:2}," ")):"",this.state.showLink?u.a.createElement(B.a,{container:!0,spacing:2},u.a.createElement(B.a,{item:!0,xs:12,md:12,lg:12,xl:12},u.a.createElement(z,{fullWidth:!0,id:"txCorreo",label:"Link de invitaci\xf3n",inputProps:{maxLength:256},required:!0,value:this.state.link,onChange:this.handleChange("link"),variant:"outlined"})),u.a.createElement(B.a,{item:!0,xs:12,md:12,lg:12,xl:12},u.a.createElement(z,{fullWidth:!0,id:"txCorreo",label:"Direcci\xf3n residencial",inputProps:{maxLength:256},required:!0,value:this.state.address,onChange:this.handleChange("address"),variant:"outlined"})),u.a.createElement(U,{m:2}),u.a.createElement(F.a,{backgroundColor:"#172449",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return Y(e.state,e)}},"GUARDAR Y FINALIZAR"),u.a.createElement(U,{m:2}),u.a.createElement(E.a,{color:"success",fullWidth:!0,severity:"info"},"Los miembros del grupo tendr\xe1n acceso siempre y cuando env\xeden su cuota mensual de forma autom\xe1tica o manual por medio de KIP.")):"")),u.a.createElement($,{hidden:this.state.step3,mt:3},u.a.createElement(N.a,{mb:10,variant:"h6",gutterBottom:!0},"3/3 | \xa1Hemos terminado!"),u.a.createElement(U,{m:2}),u.a.createElement(V,{mt:5,mb:5}),u.a.createElement(N.a,{variant:"h6",gutterBottom:!0},"Tus ingresos mensuales estimados para este grupo"),u.a.createElement(U,{m:5}),u.a.createElement(B.a,{container:!0,alignItems:"center",spacing:2},u.a.createElement(B.a,{item:!0,xs:12,md:12,lg:12,xl:12},u.a.createElement(q.a,null,u.a.createElement(N.a,{variant:"h2",gutterBottom:!0},this.state.willreceive)),u.a.createElement(V,{mt:5,mb:5}),u.a.createElement(N.a,{variant:"button",gutterBottom:!0},"Comparte el link de tu grupo (Toca para copiar el link)")),u.a.createElement(z,{fullWidth:!0,id:"outlined-disabled",label:"",defaultValue:"",InputProps:{readOnly:!0},value:this.state.lts,variant:"outlined",color:"success",helperText:"Toca para copiar el link",onClick:function(){return function(e,t){var a=e.lts,n="\xa1Hola!\nHe creado un grupo en KIP para compartir los gastos de "+e.serviceName+". Puedes unirte al grupo usando este link: "+a;navigator.clipboard.writeText(n),t.setState({toasterMessage:"\xa1Enlace copiado!"}),t.setState({toaster:!0})}(e.state,e)}}),u.a.createElement(B.a,{item:!0,xs:12,md:12,lg:12,xl:12},u.a.createElement(U,{m:2}),u.a.createElement(V,{mt:5,mb:5}),u.a.createElement(F.a,{backgroundColor:"#172449",fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){return e.state,void(window.location.href="/#/mysubscriptions")}},"IR A MIS GRUPOS"))))))}}]),t}(u.a.Component);t.default=function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(k.a,{title:"Crear grupo"}),u.a.createElement(N.a,{variant:"h3",gutterBottom:!0,display:"inline"},"Crear grupo para compartir"),u.a.createElement(V,{my:6}),u.a.createElement(B.a,{container:!0,spacing:6},u.a.createElement(B.a,{item:!0,xs:12,md:8,lg:6,xl:6},u.a.createElement(Z,null))))}}}]);
//# sourceMappingURL=78.f8f41a68.chunk.js.map